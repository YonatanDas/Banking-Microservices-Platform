# Argo CD Image Updater Configuration for Dev Environment
# This file documents the Image Updater configuration
# Actual configuration is done via Application annotations (see banking-app-dev.yaml)

# Image Updater Settings:
# - Enabled via annotations in banking-app-dev.yaml
# - Write-back method: Git (commits changes to repository)
# - Update strategy: Semantic versioning (semver)
# - Target branch: main
# - Target path: helm/environments/dev-env/values.yaml

# ECR Repository Mappings:
# - accounts: 063630846340.dkr.ecr.us-east-1.amazonaws.com/accounts
# - cards: 063630846340.dkr.ecr.us-east-1.amazonaws.com/cards
# - loans: 063630846340.dkr.ecr.us-east-1.amazonaws.com/loans
# - gatewayserver: 063630846340.dkr.ecr.us-east-1.amazonaws.com/gatewayserver

# Update Behavior:
# - Dev environment uses semver strategy (allows patch, minor, major updates)
# - Image Updater scans ECR for new tags matching semver pattern
# - When new image is found, updates values.yaml and commits to Git
# - Argo CD detects Git change and syncs automatically (if auto-sync enabled)

# To enable Image Updater:
# 1. Install Argo CD Image Updater in the cluster (via Helm or kubectl)
# 2. Configure GitHub credentials (SSH key or PAT) in Argo CD
# 3. Ensure Image Updater has permissions to read ECR and write to Git
# 4. Annotations in banking-app-dev.yaml will be processed automatically

# To disable Image Updater:
# - Remove or comment out annotations in banking-app-dev.yaml
# - Or set update-strategy to "none" for specific images

# Alternative: Manual Image Tag Updates
# If not using Image Updater, update image tags manually in:
# - helm/environments/dev-env/values.yaml
# - Commit and push to trigger Argo CD sync


loki:
  auth_enabled: false
  generatedConfigObjectName: ""
  
  schemaConfig:
    configs:
      - from: "2024-01-01"
        store: boltdb-shipper
        object_store: s3
        schema: v11
        index:
          prefix: loki_index_
          period: 24h
  
  storage:
    type: s3
    bucketNames:
      loki: dev-loki-storage-063630846340
    s3:
      endpoint: s3.us-east-1.amazonaws.com
      region: us-east-1
      s3ForcePathStyle: false
      secretAccessKey: ""
      accessKeyId: ""

  serviceAccount:
    create: true
    name: loki
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::063630846340:role/dev-loki-s3-access-role

  persistence:
    enabled: true
    size: 30Gi
    storageClassName: gp3

# Deployment mode - must be at root level
deploymentMode: SingleBinary

# SingleBinary configuration
singleBinary:
  replicas: 1
  # Explicitly disable query-scheduler in SingleBinary mode
  extraArgs:
    -target: single-binary
    -config.expand-env=true

# Explicitly disable all distributed components
backend:
  replicas: 0

read:
  replicas: 0

write:
  replicas: 0

# Disable query-scheduler explicitly
queryScheduler:
  replicas: 0
  enabled: false

canary:
  replicas: 0

# Gateway configuration
gateway:
  enabled: true
  replicas: 1
  service:
    type: ClusterIP

# Disable Grafana Agent (if not needed) to save pod quota
grafana-agent:
  enabled: false